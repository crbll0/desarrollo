<odoo>
    <data>
        <record id="core_system_tree_view" model="ir.ui.view">
            <field name="name">CoreSystem Tree</field>
            <field name="model">core.system</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="core_system_form_view" model="ir.ui.view">
            <field name="name">CoreSystem Form</field>
            <field name="model">core.system</field>
            <field name="arch" type="xml">
                <form>
                  <header>
                      <button name="action_import" type="object" string="Importa Datos" states="draft"/>
                      <button name="action_validate" type="object" string="Validar Datos" states="import"/>
                      <button name="action_done" type="object" string="Crear Factura y Cerrar" states="validate"/>
                    <field name="state" widget="statusbar"/>
                  </header>
                  <sheet>
                      <field name="move_ids" invisible="1"/>
                    <div name="button_box" class="oe_button_box">
                        <button name="button_invoices" type='object' class="oe_stat_button" icon="fa-bars" attrs="{'invisible': [('move_count', '=', 0)]}">
                            <field name="move_count"/>
                            <span attrs="{'invisible':[('move_count','&gt;',1)]}">Factura</span>
                            <span attrs="{'invisible':[('move_count','&lt;=',1)]}">Facturas</span>
                        </button>
                    </div>
                    <group>
                      <group>
                        <field name="date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                      </group>
                    </group>
                    <notebook>
                      <page string="Detalle">
                        <group>
                            <field name="line_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="core_id" invisible="1"/>
                                    <field name="process_date"/>
                                    <field name="processed_state"/>
                                    <field name="billing_period"/>
                                    <field name="id_billing_calculation"/>
                                    <field name="id_billing_service"/>
                                    <field name="entity_name"/>
                                </tree>
                            </field>
                        </group>
                      </page>
                    </notebook>
                  </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>
        
        <record id="core_system_action" model="ir.actions.act_window">
            <field name="name">Core System</field>
            <field name="res_model">core.system</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="core_system_menu_root"
                  name="Core System"
                  parent="account_accountant.menu_accounting"
        />
        
        <menuitem id="core_system_menu"
                  name="Core Billing Process"
                  parent="cevaldom-bill.core_system_menu_root"
                  action="core_system_action"
        />
        
        <record id="core_system_lines_tree_view" model="ir.ui.view">
            <field name="name">CoreSystemLine Tree</field>
            <field name="model">core.system.lines</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="core_id" invisible="1"/>
                    <field name="id_billing_calc_process" invisible="0"/>
                    <field name="process_date"/>
                    <field name="processed_state"/>
                    <field name="billing_period"/>
                    <field name="id_billing_calculation"/>
                    <field name="payment_reference" invisible="0"/>
                    <field name="billing_date" invisible="0"/>
                    <field name="billing_currency" invisible="0"/>
                    <field name="ind_invoice_core" invisible="0"/>
                    <field name="ind_web_service" invisible="0"/>
                    <field name="ind_reject_core" invisible="0"/>
                    <field name="id_billing_detail" invisible="0"/>
                    <field name="service_name"/>
                    <field name="service_rate" invisible="0"/>
                    <field name="quantity" invisible="0"/>
                    <field name="net_amount" invisible="0"/>
                    <field name="id_billing_service"/>
                    <field name="entity_code" invisible="0"/>
                    <field name="person_type" invisible="0"/>
                    <field name="document_type" invisible="0"/>
                    <field name="entity_name"/>
                    <field name="entity_address" invisible="0"/>
                    <field name="entity_district" invisible="0"/>
                    <field name="entity_province" invisible="0"/>
                    <field name="entity_type" invisible="0"/>
                    <field name="entity_collection" invisible="0"/>
                    <field name="id_holder" invisible="0"/>
                    <field name="id_issuer" invisible="0"/>
                    <field name="id_participant" invisible="0"/>
                    <field name="id_entity_block" invisible="0"/>
                </tree>
            </field>
        </record>
        
        <record id="core_system_lines_action" model="ir.actions.act_window">
            <field name="name">Core System Lines</field>
            <field name="res_model">core.system.lines</field>
            <field name="view_mode">tree,pivot</field>
        </record>

        <menuitem id="core_system_lines_menu"
                  name="Core Billing Detail"
                  parent="cevaldom-bill.core_system_menu_root"
                  action="core_system_lines_action"
        />

    </data>
</odoo>